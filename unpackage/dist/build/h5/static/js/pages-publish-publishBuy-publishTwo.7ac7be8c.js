(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-publish-publishBuy-publishTwo"],{"058c":function(t,i,a){"use strict";var e=a("ee27");a("caad"),a("c975"),a("a15b"),a("a434"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e(a("b07b")),s=(e(a("8068")),e(a("0c0e"))),l=e(a("16a6")),u=e(a("5f2b")),o={components:{inputSearch:n.default,uUpload:l.default,LbPicker:u.default},data:function(){return{uploadState:{COMPLETE:0,UNFINISHED:1,SUCCESS:2,ERROR:3,files:{}},publishData:{type:"",cate_id:"",brand_id:"",title:"",desc:"",otherBrand:"",country:"",supplierPrice:"",price:"",num:"",unit_cate_id:"\t",qualification:"",use_way:"",thumbnail:"",dead_time:"",images:[],info:[],service_id:""},entrustList:[{value:"3",name:"销售"},{value:"4",name:"采购"},{value:"5",name:"官方自营"}],dataSource:[],brandvalue:"请选择品牌",selectbrand:[],selectUnit:[],curUnit:"请选择",action:s.default.getUploadData,filesArr:[],fileList:[],customBtn:!1,lists:[],Listids:[],isCheckAll:!1,supplier_price:"",current:0,useItems:[{value:"1",name:"民用"},{value:"2",name:"医用"}],serviceList:[{id:"1",name:"置顶",price:"30"},{id:"2",name:"加急",price:"30"}],qualtitems:[],brandProps:{label:"cn_name",value:"cn_name",brandid:"id"},UnitProps:{label:"cn_name",value:"cn_name",unitid:"id"}}},onLoad:function(t){this.publishData.type=t.type,this.publishData.cate_id=t.cate_id,this.initData(),this.countryData()},methods:{checkUploadFiles:function(){var t=!0,i=this.uploadState,a=this.uploadState.files;for(var e in a)if(a[e]==i.UNFINISHED||a[e]==i.EEROR){t=!1;break}return t},uploadHandler:function(t,i,a){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);e.push(a),this[i].apply(this,e)},onProgress:function(t,i,a,e){this.uploadState.files[e]=this.uploadState.UNFINISHED},onSuccess:function(t,i,a,e){t=JSON.parse(t),this.uploadState.files[e]=this.uploadState.SUCCESS,this.publishData[e]=t.data.img_url;var n=["images","info"];if(n.includes(e)){for(var s=[],l=0;l<a.length;l++)if("string"==typeof a[l].response){var u=JSON.parse(a[l].response);s.push(u.data.img_url)}this.publishData[e]=s.join(","),console.log("4",this.publishData[e])}},onChange:function(t,i,a,e){this.uploadState.files[e]=this.uploadState.COMPLETE},onError:function(t,i,a,e){this.uploadState.files[e]=this.uploadState.EEROR},onRemove:function(t,i,a){console.log("onRemove ",t,i,a,22222);var e=["images","info"];e.includes(a)?this.publishData[a].splice(t,1):(this.uploadState.files[a]=void 0,this.publishData[a]="")},typeChange:function(t){for(var i=0;i<this.entrustList.length;i++)if(this.entrustList[i].value===t.target.value){this.current=i;break}this.publishData.type=t.target.value,console.log(this.publishData.type)},initData:function(){var t=this;this.request({url:s.default.getBrandData,dataType:"JSON",method:"POST",data:{data:{cate_id:this.publishData.cate_id}},success:function(i){t.selectbrand=i.data.length?i.data:[]}}),this.request({url:s.default.getqualtData,dataType:"JSON",method:"POST",success:function(i){t.qualtitems=i.data}}),this.request({url:s.default.getUnitData,dataType:"JSON",method:"POST",success:function(i){t.selectUnit=i.data}})},countryData:function(){var t=this;this.request({url:s.default.getCountryData,dataType:"JSON",method:"POST",success:function(i){t.dataSource=i.data}})},handleChange:function(t){this.exit_country=t},handleTap:function(t){this.$refs[t].show()},brandChange:function(t){this.publishData.brand_id=t.item.id},Unithange:function(t){this.publishData.unit_cate_id=t.item.id},radioChange:function(t){this.publishData.use_way=t.detail.value},qualtChange:function(t){for(var i=this.qualtitems,a=t.detail.value,e=0,n=i.length;e<n;++e){var s=i[e];a.indexOf(s.value)>=0?this.$set(s,"checked",!0):this.$set(s,"checked",!1)}var l=a.join(",");this.publishData.qualification=l},checkboxChange:function(t){var i=this.Listids.indexOf(t);i>=0?this.Listids.splice(i,1):this.Listids.push(t);var a=this.Listids.join(",");this.publishData.service_id=a},publishSubmit:function(){var t={data:{type:this.publishData.type,cate_id:this.publishData.cate_id,title:this.publishData.title,desc:this.publishData.desc,thumbnail:this.publishData.thumbnail,other_brand:this.publishData.otherBrand,brand_id:this.publishData.brand_id,num:this.publishData.num,exit_country:this.exit_country,price:this.publishData.price,dead_time:this.publishData.deadtime,use_way:this.publishData.use_way,qualification:this.publishData.qualification,unit_cate_id:this.publishData.unit_cate_id,service_id:this.publishData.service_id,images:this.publishData.images,supplier_price:this.publishData.supplier_price,info:this.publishData.info}};this.request({url:s.default.getPublishData,dataType:"JSON",method:"POST",data:t,success:function(t){200==t.code?(uni.showToast({title:"发布需求成功，请前往首页查看",icon:"none"}),setTimeout((function(){uni.switchTab({url:"/pages/index/index"})}),1e3)):uni.showToast({title:t.message,icon:"none"})}})}}};i.default=o},"4cc6":function(t,i,a){"use strict";var e={"cl-form":a("5a17").default,"cl-form-item":a("547b").default,"cl-input":a("c12d").default,"u-upload":a("16a6").default,"cl-icon":a("2e8b").default,"cl-select":a("9802").default},n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"pb60"},[a("cl-form",{ref:"form",attrs:{model:t.publishData},on:{"update:model":function(i){arguments[0]=i=t.$handleEvent(i),t.publishData=i}}},[3==t.publishData.type||4==t.publishData.type||5==t.publishData.type?a("v-uni-view",{staticClass:"uni-form-item m-form-item"},[a("v-uni-radio-group",{on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.typeChange.apply(void 0,arguments)}}},t._l(t.entrustList,(function(i,e){return a("v-uni-label",{key:e,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-radio",{staticStyle:{transform:"scale(0.7)"},attrs:{value:i.value,checked:e===t.current,color:"#44a78d"}}),t._v(t._s(i.name))],1)})),1)],1):t._e(),a("v-uni-view",{staticClass:"uni-form-item m-form-item"},[a("v-uni-text",{staticClass:"colorred"},[t._v("*")]),a("cl-form-item",{staticClass:"uni-input",attrs:{label:""}},[a("cl-input",{staticClass:"uni-tl-input",attrs:{placeholder:"标题"},model:{value:t.publishData.title,callback:function(i){t.$set(t.publishData,"title",i)},expression:"publishData.title"}})],1)],1),a("v-uni-view",{staticClass:"uni-form-item"},[a("v-uni-textarea",{staticClass:"uni-input uni-tl-input uni-textarea",attrs:{placeholder:"描述"},model:{value:t.publishData.desc,callback:function(i){t.$set(t.publishData,"desc",i)},expression:"publishData.desc"}})],1),a("v-uni-view",{staticClass:"uni-form-item upload-images"},[a("v-uni-view",{staticClass:"upload-item"},[a("u-upload",{ref:"uUpload",attrs:{"custom-btn":t.customBtn,"show-upload-list":!0,action:t.action,"auto-upload":!0,"file-list":t.fileList,"show-progress":!0,deletable:!0,"max-count":1,width:"145",uploadText:"",name:"image",testref:"image1"},on:{"on-progress":function(i){arguments[0]=i=t.$handleEvent(i),t.uploadHandler(arguments,"onProgress","thumbnail")},"on-success":function(i){arguments[0]=i=t.$handleEvent(i),t.uploadHandler(arguments,"onSuccess","thumbnail")},"on-error":function(i){arguments[0]=i=t.$handleEvent(i),t.uploadHandler(arguments,"onError","thumbnail")},"on-change":function(i){arguments[0]=i=t.$handleEvent(i),t.uploadHandler(arguments,"onChange","thumbnail")},"on-remove":function(i){arguments[0]=i=t.$handleEvent(i),t.uploadHandler(arguments,"onRemove","thumbnail")}}}),a("v-uni-view",{staticClass:"imagestips"},[a("v-uni-text",{staticClass:"colorred"},[t._v("*")]),t._v("宝贝主图")],1)],1),a("v-uni-view",{staticClass:"upload-item"},[a("u-upload",{attrs:{"custom-btn":t.customBtn,"show-upload-list":!0,action:t.action,"auto-upload":!0,"file-list":t.fileList,"show-progress":!0,deletable:!0,"max-count":3,width:"145",uploadText:"",name:"image",testref:"image2"},on:{"on-progress":function(i){arguments[0]=i=t.$handleEvent(i),t.uploadHandler(arguments,"onProgress","images")},"on-success":function(i){arguments[0]=i=t.$handleEvent(i),t.uploadHandler(arguments,"onSuccess","images")},"on-error":function(i){arguments[0]=i=t.$handleEvent(i),t.uploadHandler(arguments,"onError","images")},"on-change":function(i){arguments[0]=i=t.$handleEvent(i),t.uploadHandler(arguments,"onChange","images")},"on-remove":function(i){arguments[0]=i=t.$handleEvent(i),t.uploadHandler(arguments,"onRemove","images")}}},[t.customBtn?a("v-uni-view",{staticClass:"slot-btn",attrs:{slot:"addBtn","hover-class":"slot-btn__hover","hover-stay-time":"150"},slot:"addBtn"},[a("cl-icon",{staticClass:"icon-jia",attrs:{name:"cl-icon",size:50,color:"#E2E2E2"}})],1):t._e()],1),a("v-uni-view",{staticClass:"imagestips"},[a("v-uni-text",{staticClass:"colorred"},[t._v("*")]),t._v("添加上传图片")],1)],1)],1),a("v-uni-view",{staticClass:"uni-form-item"},[a("v-uni-view",{staticClass:"uni-input uni-input-left"},[a("v-uni-view",{staticClass:"brand-bg",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleTap("picker1")}}},[a("v-uni-view",{staticClass:"title"},[t._v(t._s(t.brandvalue))]),a("cl-icon",{attrs:{name:"cl-icon-arrow-bottom"}})],1),a("lb-picker",{ref:"picker1",attrs:{props:t.brandProps,list:t.selectbrand},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.brandChange.apply(void 0,arguments)}},model:{value:t.brandvalue,callback:function(i){t.brandvalue=i},expression:"brandvalue"}})],1)],1),a("v-uni-view",{staticClass:"uni-form-item m-form-item"},[a("v-uni-view",{staticClass:"title"},[t._v("其他品牌")]),a("cl-form-item",{staticClass:"uni-input",attrs:{label:""}},[a("cl-input",{attrs:{placeholder:"请输入品牌"},model:{value:t.publishData.otherBrand,callback:function(i){t.$set(t.publishData,"otherBrand",i)},expression:"publishData.otherBrand"}})],1)],1),a("v-uni-view",{staticClass:"uni-form-item m-form-item"},[a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"colorred"},[t._v("*")]),t._v("数量")],1),a("v-uni-view",{staticClass:"uni-input uni-input-left m-flex"},[a("cl-input",{staticClass:"inline-block",attrs:{placeholder:"请输入数量"},model:{value:t.publishData.num,callback:function(i){t.$set(t.publishData,"num",i)},expression:"publishData.num"}}),a("v-uni-view",{staticClass:"unit-picker"},[a("v-uni-view",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handleTap("Unitpicker")}}},[a("v-uni-view",{staticClass:"curunit"},[t._v(t._s(t.curUnit)),a("cl-icon",{attrs:{name:"cl-icon-arrow-bottom"}})],1),a("v-uni-text",[t._v("(单位)")])],1),a("lb-picker",{ref:"Unitpicker",attrs:{props:t.UnitProps,list:t.selectUnit},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.Unithange.apply(void 0,arguments)}},model:{value:t.curUnit,callback:function(i){t.curUnit=i},expression:"curUnit"}})],1)],1)],1),a("v-uni-view",{staticClass:"uni-form-item m-form-item"},[a("v-uni-view",{staticClass:"title"},[t._v("出口国")]),a("inputSearch",{staticClass:"uni-input",attrs:{dataSource:t.dataSource,placeholder:""},on:{select:function(i){arguments[0]=i=t.$handleEvent(i),t.handleChange.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"uni-form-item m-form-item"},[a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"colorred"},[t._v("*")]),t._v("价格")],1),a("cl-form-item",{staticClass:"uni-input",attrs:{label:""}},[a("cl-input",{attrs:{placeholder:"￥ 0.00"},model:{value:t.publishData.price,callback:function(i){t.$set(t.publishData,"price",i)},expression:"publishData.price"}})],1)],1),2==t.publishData.type?a("v-uni-view",{staticClass:"uni-form-item m-form-item"},[a("v-uni-view",{staticClass:"title"},[t._v("供应商价格")]),a("cl-form-item",{staticClass:"uni-input",attrs:{label:""}},[a("cl-input",{attrs:{placeholder:"￥ 0.00"},model:{value:t.publishData.supplier_price,callback:function(i){t.$set(t.publishData,"supplier_price",i)},expression:"publishData.supplier_price"}})],1)],1):t._e(),a("v-uni-view",{staticClass:"qualifications"},[a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"colorred"},[t._v("*")]),t._v("资质")],1),a("v-uni-view",{staticClass:"checkbox-list"},[a("v-uni-checkbox-group",{staticClass:"checkbox-item-box pb0",on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.qualtChange.apply(void 0,arguments)}}},t._l(t.qualtitems,(function(t,i){return a("v-uni-label",{key:t.value,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-checkbox",{staticStyle:{transform:"scale(0.7)"},attrs:{value:t.id.toString(),color:"#44a78d"}}),a("v-uni-image",{attrs:{src:t.icon,mode:""}})],1)})),1)],1)],1),a("v-uni-view",{staticClass:"uni-form-item"},[a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"colorred"},[t._v("*")]),t._v("截止日期")],1),a("cl-form-item",{staticClass:"uni-input",attrs:{label:"",prop:"date",justify:"end"}},[a("cl-select",{attrs:{mode:"date",placeholder:"请点击选择"},model:{value:t.publishData.deadtime,callback:function(i){t.$set(t.publishData,"deadtime",i)},expression:"publishData.deadtime"}})],1)],1),a("v-uni-view",{staticClass:"uni-form-item"},[a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"colorred"},[t._v("*")]),t._v("用途")],1),a("v-uni-view",{staticClass:"uni-input"},[a("v-uni-radio-group",{on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.radioChange.apply(void 0,arguments)}}},t._l(t.useItems,(function(i,e){return a("v-uni-label",{key:e,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-radio",{staticStyle:{transform:"scale(0.7)"},attrs:{value:i.value,color:"#44a78d"}}),t._v(t._s(i.name))],1)})),1)],1)],1),a("v-uni-view",{staticClass:"upprducttitle"},[t._v("上传商品详情")]),a("v-uni-view",{staticClass:"uni-form-item more-upload"},[a("u-upload",{ref:"uUpload_2",attrs:{"custom-btn":t.customBtn,"show-upload-list":!0,action:t.action,"auto-upload":!0,"file-list":t.fileList,"show-progress":!0,deletable:!0,"max-count":8,width:"145",uploadText:"",name:"image",testref:"image2"},on:{"on-progress":function(i){arguments[0]=i=t.$handleEvent(i),t.uploadHandler(arguments,"onProgress","info")},"on-success":function(i){arguments[0]=i=t.$handleEvent(i),t.uploadHandler(arguments,"onSuccess","info")},"on-error":function(i){arguments[0]=i=t.$handleEvent(i),t.uploadHandler(arguments,"onError","info")},"on-change":function(i){arguments[0]=i=t.$handleEvent(i),t.uploadHandler(arguments,"onChange","info")},"on-remove":function(i){arguments[0]=i=t.$handleEvent(i),t.uploadHandler(arguments,"onRemove","info")}}},[t.customBtn?a("v-uni-view",{staticClass:"slot-btn",attrs:{slot:"addBtn","hover-class":"slot-btn__hover","hover-stay-time":"150"},slot:"addBtn"},[a("cl-icon",{staticClass:"icon-jia",attrs:{name:"cl-icon",size:50,color:"#E2E2E2"}})],1):t._e()],1)],1),a("v-uni-view",{staticClass:"size-text"},[t._v("单张大小"),a("v-uni-text",[t._v("5M")]),t._v("以内")],1),a("v-uni-view",{staticClass:"checkbox-list checkbox-list-bottom"},t._l(t.serviceList,(function(i,e){return a("v-uni-view",{key:e,staticClass:"checkbox-item",class:{isChecked:t.Listids.indexOf(i.id)>=0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.checkboxChange(i.id)}}},[a("v-uni-view",{staticClass:"title"},[t._v(t._s(i.name)),a("v-uni-text",{staticClass:"iconfont"},[t._v("")])],1),a("v-uni-view",{staticClass:"checkboxbg"},[a("v-uni-view",{staticClass:"dec-text"},[t._v(t._s(i.name)),a("v-uni-view",{staticClass:"iconfont"},[t._v("")])],1),a("v-uni-view",{staticClass:"price"},[a("v-uni-text",[t._v("￥"+t._s(i.price)+"/份")]),t.Listids.indexOf(i.id)<0?a("cl-icon",{staticClass:"checkbox-icon cl-icon-round-check",attrs:{name:"cl-icon",size:40,color:"#E2E2E2"}}):a("cl-icon",{staticClass:"checkbox-icon cl-icon-round-check-fill",attrs:{name:"cl-icon",size:40,color:"#44a78d"}})],1)],1)],1)})),1),a("v-uni-view",{staticClass:"common-btn"},[a("v-uni-button",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.publishSubmit.apply(void 0,arguments)}}},[t._v("立即发布")])],1)],1)],1)},s=[];a.d(i,"b",(function(){return n})),a.d(i,"c",(function(){return s})),a.d(i,"a",(function(){return e}))},"4fc4":function(t,i,a){"use strict";a.r(i);var e=a("4cc6"),n=a("8cf3");for(var s in n)"default"!==s&&function(t){a.d(i,t,(function(){return n[t]}))}(s);a("6876");var l,u=a("f0c5"),o=Object(u["a"])(n["default"],e["b"],e["c"],!1,null,"002b761b",null,!1,e["a"],l);i["default"]=o.exports},6876:function(t,i,a){"use strict";var e=a("d379"),n=a.n(e);n.a},"6bea":function(t,i,a){var e=a("24fb");i=e(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.uni-search-box[data-v-002b761b]{padding-top:%?36.23?%}.publish-categroy[data-v-002b761b]{margin-top:%?36.23?%}.next-btn[data-v-002b761b]{position:fixed;left:0;right:0;background:#fff;width:100%;bottom:0;z-index:99;padding:%?16.3?% %?72.46?%}.next-btn uni-button[data-v-002b761b]{width:%?576.08?%;height:%?72.46?%;line-height:%?72.46?%;background:#44a78d;border-radius:%?181.15?%;text-align:center;font-size:%?32.6?%;color:#fff;cursor:pointer}\r\n/*发布页面*/.upload-images[data-v-002b761b]{display:-webkit-box;display:-webkit-flex;display:flex;text-align:center;-webkit-box-pack:left;-webkit-justify-content:left;justify-content:left}.m-cl-box[data-v-002b761b]{display:block;padding:%?7.24?% %?18.11?%}.m-cl-pt15[data-v-002b761b]{padding:0 %?27.17?% 0 %?45.28?%}.brand-bg[data-v-002b761b]{margin-bottom:0!important}.brand-bg .cl-card__container[data-v-002b761b]{background-color:#f6f6f6;border-radius:3px;border:solid 1px #e2e2e2;height:%?72.46?%;line-height:%?72.46?%;padding:0 %?18.11?%!important}.imagestips[data-v-002b761b]{text-align:left}',""]),t.exports=i},"8cf3":function(t,i,a){"use strict";a.r(i);var e=a("058c"),n=a.n(e);for(var s in e)"default"!==s&&function(t){a.d(i,t,(function(){return e[t]}))}(s);i["default"]=n.a},d379:function(t,i,a){var e=a("6bea");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=a("4f06").default;n("4c9d014f",e,!0,{sourceMap:!1,shadowMode:!1})}}]);