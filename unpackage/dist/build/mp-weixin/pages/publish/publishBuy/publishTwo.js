(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/publish/publishBuy/publishTwo"],{"0d4e":function(t,e,i){},"1ba1":function(t,e,i){"use strict";var n={"cl-form":function(){return Promise.all([i.e("common/vendor"),i.e("cool/ui/components/form/form")]).then(i.bind(null,"5a17"))},"cl-form-item":function(){return Promise.all([i.e("common/vendor"),i.e("cool/ui/components/form-item/form-item")]).then(i.bind(null,"547b"))},"cl-input":function(){return i.e("cool/ui/components/input/input").then(i.bind(null,"c12d"))},"u-upload":function(){return i.e("components/u-upload/u-upload").then(i.bind(null,"16a6"))},"cl-icon":function(){return Promise.all([i.e("common/vendor"),i.e("cool/ui/components/icon/icon")]).then(i.bind(null,"2e8b"))},"cl-select":function(){return Promise.all([i.e("common/vendor"),i.e("cool/ui/components/select/select")]).then(i.bind(null,"9802"))}},a=function(){var t=this,e=t.$createElement,i=(t._self._c,t.__map(t.qualtitems,(function(e,i){var n=e.id.toString();return{$orig:t.__get_orig(e),g0:n}}))),n=t.__map(t.serviceList,(function(e,i){var n=t.Listids.indexOf(e.id),a=t.Listids.indexOf(e.id);return{$orig:t.__get_orig(e),g1:n,g2:a}}));t.$mp.data=Object.assign({},{$root:{l0:i,l1:n}})},u=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return u})),i.d(e,"a",(function(){return n}))},3768:function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement;t._self._c},u=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return u})),i.d(e,"a",(function(){return n}))},"4fc4":function(t,e,i){"use strict";i.r(e);var n=i("1ba1"),a=i("8cf3");for(var u in a)"default"!==u&&function(t){i.d(e,t,(function(){return a[t]}))}(u);i("5fc7");var s,o=i("f0c5"),l=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=l.exports},"5fc7":function(t,e,i){"use strict";var n=i("0d4e"),a=i.n(n);a.a},"611b":function(t,e,i){"use strict";i.r(e);var n=i("c225"),a=i.n(n);for(var u in n)"default"!==u&&function(t){i.d(e,t,(function(){return n[t]}))}(u);e["default"]=a.a},"6aff":function(t,e,i){"use strict";var n=i("bf44"),a=i.n(n);a.a},8068:function(t,e,i){"use strict";i.r(e);var n=i("3768"),a=i("611b");for(var u in a)"default"!==u&&function(t){i.d(e,t,(function(){return a[t]}))}(u);i("6aff");var s,o=i("f0c5"),l=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"30ebd11a",null,!1,n["a"],s);e["default"]=l.exports},"8cf3":function(t,e,i){"use strict";i.r(e);var n=i("e214"),a=i.n(n);for(var u in n)"default"!==u&&function(t){i.d(e,t,(function(){return n[t]}))}(u);e["default"]=a.a},bf44:function(t,e,i){},c225:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"uniCombox",props:{label:{type:String,default:""},labelWidth:{type:String,default:"auto"},placeholder:{type:String,default:""},candidates:{type:Array,default:function(){return[]}},emptyTips:{type:String,default:"无匹配项"},value:{type:String,default:""}},data:function(){return{showSelector:!1,inputVal:""}},computed:{labelStyle:function(){return"auto"===this.labelWidth?{}:{width:this.labelWidth}},filterCandidates:function(){var t=this;return this.candidates.filter((function(e){return e.indexOf(t.inputVal)>-1}))},filterCandidatesLength:function(){return this.filterCandidates.length}},watch:{value:{handler:function(t){this.inputVal=t},immediate:!0}},methods:{toggleSelector:function(){this.showSelector=!this.showSelector},onFocus:function(){this.showSelector=!0},onBlur:function(){var t=this;setTimeout((function(){t.showSelector=!1}),50)},onSelectorClick:function(t){this.inputVal=this.filterCandidates[t],this.showSelector=!1,this.$emit("input",this.inputVal)},onInput:function(){var t=this;setTimeout((function(){t.$emit("input",t.inputVal)}))}}};e.default=n},e1b5:function(t,e,i){"use strict";(function(t){i("bca8"),i("921b");n(i("66fd"));var e=n(i("4fc4"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},e214:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;a(i("8068"));var n=a(i("0c0e"));function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){i.e("components/p-inputSearch/inputSearch").then(function(){return resolve(i("b07b"))}.bind(null,i)).catch(i.oe)},s=function(){i.e("components/u-upload/u-upload").then(function(){return resolve(i("16a6"))}.bind(null,i)).catch(i.oe)},o=function(){Promise.all([i.e("common/vendor"),i.e("components/lb-picker/index")]).then(function(){return resolve(i("5f2b"))}.bind(null,i)).catch(i.oe)},l={components:{inputSearch:u,uUpload:s,LbPicker:o},data:function(){return{uploadState:{COMPLETE:0,UNFINISHED:1,SUCCESS:2,ERROR:3,files:{}},publishData:{type:"",cate_id:"",brand_id:"",title:"",desc:"",otherBrand:"",country:"",supplierPrice:"",price:"",num:"",unit_cate_id:"\t",qualification:"",use_way:"",thumbnail:"",dead_time:"",images:[],info:[],service_id:""},entrustList:[{value:"3",name:"销售"},{value:"4",name:"采购"},{value:"5",name:"官方自营"}],dataSource:[],brandvalue:"请选择品牌",selectbrand:[],selectUnit:[],curUnit:"请选择",action:n.default.getUploadData,filesArr:[],fileList:[],customBtn:!1,lists:[],Listids:[],isCheckAll:!1,supplier_price:"",current:0,useItems:[{value:"1",name:"民用"},{value:"2",name:"医用"}],serviceList:[{id:"1",name:"置顶",price:"30"},{id:"2",name:"加急",price:"30"}],qualtitems:[],brandProps:{label:"cn_name",value:"cn_name",brandid:"id"},UnitProps:{label:"cn_name",value:"cn_name",unitid:"id"}}},onLoad:function(t){this.publishData.type=t.type,this.publishData.cate_id=t.cate_id,this.initData(),this.countryData()},methods:{checkUploadFiles:function(){var t=!0,e=this.uploadState,i=this.uploadState.files;for(var n in i)if(i[n]==e.UNFINISHED||i[n]==e.EEROR){t=!1;break}return t},uploadHandler:function(t,e,i){for(var n=[],a=0;a<t.length;a++)n.push(t[a]);n.push(i),this[e].apply(this,n)},onProgress:function(t,e,i,n){this.uploadState.files[n]=this.uploadState.UNFINISHED},onSuccess:function(t,e,i,n){t=JSON.parse(t),this.uploadState.files[n]=this.uploadState.SUCCESS,this.publishData[n]=t.data.img_url;var a=["images","info"];if(a.includes(n)){for(var u=[],s=0;s<i.length;s++)if("string"==typeof i[s].response){var o=JSON.parse(i[s].response);u.push(o.data.img_url)}this.publishData[n]=u.join(","),console.log("4",this.publishData[n])}},onChange:function(t,e,i,n){this.uploadState.files[n]=this.uploadState.COMPLETE},onError:function(t,e,i,n){this.uploadState.files[n]=this.uploadState.EEROR},onRemove:function(t,e,i){console.log("onRemove ",t,e,i,22222);var n=["images","info"];n.includes(i)?this.publishData[i].splice(t,1):(this.uploadState.files[i]=void 0,this.publishData[i]="")},typeChange:function(t){for(var e=0;e<this.entrustList.length;e++)if(this.entrustList[e].value===t.target.value){this.current=e;break}this.publishData.type=t.target.value,console.log(this.publishData.type)},initData:function(){var t=this;this.request({url:n.default.getBrandData,dataType:"JSON",method:"POST",data:{data:{cate_id:this.publishData.cate_id}},success:function(e){t.selectbrand=e.data.length?e.data:[]}}),this.request({url:n.default.getqualtData,dataType:"JSON",method:"POST",success:function(e){t.qualtitems=e.data}}),this.request({url:n.default.getUnitData,dataType:"JSON",method:"POST",success:function(e){t.selectUnit=e.data}})},countryData:function(){var t=this;this.request({url:n.default.getCountryData,dataType:"JSON",method:"POST",success:function(e){t.dataSource=e.data}})},handleChange:function(t){this.exit_country=t},handleTap:function(t){this.$refs[t].show()},brandChange:function(t){this.publishData.brand_id=t.item.id},Unithange:function(t){this.publishData.unit_cate_id=t.item.id},radioChange:function(t){this.publishData.use_way=t.detail.value},qualtChange:function(t){for(var e=this.qualtitems,i=t.detail.value,n=0,a=e.length;n<a;++n){var u=e[n];i.indexOf(u.value)>=0?this.$set(u,"checked",!0):this.$set(u,"checked",!1)}var s=i.join(",");this.publishData.qualification=s},checkboxChange:function(t){var e=this.Listids.indexOf(t);e>=0?this.Listids.splice(e,1):this.Listids.push(t);var i=this.Listids.join(",");this.publishData.service_id=i},successlist:function(t,e,i){},publishSubmit:function(){var e={data:{type:this.publishData.type,cate_id:this.publishData.cate_id,title:this.publishData.title,desc:this.publishData.desc,thumbnail:this.publishData.thumbnail,other_brand:this.publishData.otherBrand,brand_id:this.publishData.brand_id,num:this.publishData.num,exit_country:this.exit_country,price:this.publishData.price,dead_time:this.publishData.deadtime,use_way:this.publishData.use_way,qualification:this.publishData.qualification,unit_cate_id:this.publishData.unit_cate_id,service_id:this.publishData.service_id,images:this.publishData.images,supplier_price:this.publishData.supplier_price,info:this.publishData.info}};this.request({url:n.default.getPublishData,dataType:"JSON",method:"POST",data:e,success:function(e){200==e.code?(t.showToast({title:"发布需求成功，请前往首页查看",icon:"none"}),setTimeout((function(){t.switchTab({url:"/pages/index/index"})}),1e3)):t.showToast({title:e.message,icon:"none"})}})}}};e.default=l}).call(this,i("543d")["default"])}},[["e1b5","common/runtime","common/vendor"]]]);