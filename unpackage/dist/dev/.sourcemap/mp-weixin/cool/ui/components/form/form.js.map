{"version":3,"sources":["webpack:///G:/program/mobilewhcmfont/cool/ui/components/form/form.vue?6d6f","webpack:///G:/program/mobilewhcmfont/cool/ui/components/form/form.vue?744c","webpack:///G:/program/mobilewhcmfont/cool/ui/components/form/form.vue?1d9c","webpack:///G:/program/mobilewhcmfont/cool/ui/components/form/form.vue?88e4","webpack:///G:/program/mobilewhcmfont/cool/ui/components/form/form.vue"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","componentName","props","model","type","Object","default","rules","border","Boolean","showMessage","showToast","labelWidth","String","labelPosition","validateOnValueChange","data","subscrible","rules2","watch","model2","handler","newV","oldV","publish","diffForm","action","deep","val","setRules","computed","JSON","parse","stringify","isLabelPosition","isBorder","created","methods","validate","callback","validateField","keys","console","warn","isArray","i","includes","find","e","prop","validator","AsyncValidator","form","forEach","errors","fields","resetFields","flag","map","isObject","isString","isBoolean","undefined","$emit","clearValidate","$nextTick","addField","item","push","removeField","findIndex","splice","k","value"],"mappings":";;;;2DAAA,4MACIA,EADJ,kMAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,0DACZ,aAAAF,E;;;;2GCtBf,uxC;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCRvB,03BAAm0B,eAAG,G;;;;6HCOt0B,kDACA,2B,yDASe,CACdC,cAAe,SAEfC,MAAO,CACNC,MAAO,CACNC,KAAMC,OACNC,QAAS,WACR,MAAO,KAGTC,MAAOF,OACPG,OAAQC,QACRC,YAAa,CACZN,KAAMK,QACNH,SAAS,GAEVK,UAAW,CACVP,KAAMK,QACNH,SAAS,GAEVM,WAAY,CACXR,KAAMS,OACNP,QAAS,UAEVQ,cAAe,CACdV,KAAMS,OACNP,QAAS,SAEVS,sBAAuB,CACtBX,KAAMK,QACNH,SAAS,IAIXU,KAlCc,WAmCb,MAAO,CACNC,WAAY,GACZC,OAAQ,KAIVC,MAAO,CACNC,OAAQ,CACPC,QADO,SACCC,EAAMC,GACb9B,KAAK+B,QAAQ,CACZtB,OAAO,IAAAuB,UAASH,EAAMC,GACtBG,OAAQ,cAGVC,MAAM,GAGPpB,MAXM,SAWAqB,GACLnC,KAAKoC,SAASD,KAIhBE,SAAU,CACTV,OADS,WAER,OAAOW,KAAKC,MAAMD,KAAKE,UAAUxC,KAAKU,SAGvC+B,gBALS,WAMR,OAAOzC,KAAKqB,cAAL,mBAAiCrB,KAAKqB,eAAkB,IAGhEqB,SATS,WAUR,OAAO1C,KAAKe,OAAS,kBAAoB,KAI3C4B,QAvEc,WAwEb3C,KAAKoC,SAASpC,KAAKc,QAGpB8B,QAAS,CAERR,SAFQ,SAECtB,GACRd,KAAKyB,OAASX,GAAS,IAIxB+B,SAPQ,SAOCC,GACR9C,KAAK+C,cAAcnC,OAAOoC,KAAKhD,KAAKU,OAAQoC,IAI7CC,cAZQ,SAYMtC,EAAOqC,GAAW,IAAD,OAC9B,IAAKrC,EAEJ,OADAwC,QAAQC,KAAR,aACO,GAGH,IAAAC,SAAQ1C,KACZA,EAAQ,CAACA,IAGV,IAAIK,EAAQ,GAVkB,WAYrBsC,GACJ3C,EAAM4C,SAASD,IACd,EAAK5B,WAAW8B,MAAK,SAACC,GAAD,OAAOA,EAAEC,MAAQJ,OACzCtC,EAAMsC,GAAK,EAAK3B,OAAO2B,KAH1B,IAAK,IAAIA,KAAKpD,KAAKyB,OAAS,EAAnB2B,GAQT,IAAMK,EAAY,IAAIC,UAAe5C,GAEjC6C,EAAO,GAEXlD,EAAMmD,SAAQ,SAACL,GACdI,EAAKJ,GAAK,EAAK7C,MAAM6C,MAGtBE,EAAUZ,SAASc,GAAM,SAACE,EAAQC,GACjC,EAAK/B,QAAQ,CAAEtB,QAAOwB,OAAQ,aAE1Ba,GACHA,GAAUe,EAAQA,OAMrBE,YAlDQ,WAmDP,IAAIJ,EAAO,GACPK,GAAO,EAEX,IAAK,IAAIZ,KAAKpD,KAAKU,MAAO,CACzB,IAAIyB,EAAMnC,KAAKU,MAAM0C,GAEjBjB,IACH6B,GAAO,IAGJ,IAAAb,SAAQhB,GACXwB,EAAKP,GAAKjB,EAAI8B,KAAI,kBAAM,SACd,IAAAC,UAAS/B,GACnBwB,EAAKP,GAAK,IACA,IAAAe,UAAShC,GACnBwB,EAAKP,GAAK,IACA,IAAAgB,WAAUjC,GACpBwB,EAAKP,IAAK,EAEVO,EAAKP,QAAKiB,EAIRL,GACHhE,KAAKsE,MAAM,eAAgBX,GAG5B3D,KAAKuE,iBAINA,cAlFQ,SAkFM9D,GAAQ,IAAD,OACpBT,KAAKwE,WAAU,WACd,EAAKzC,QAAQ,CAAEtB,QAAOwB,OAAQ,cAKhCwC,SAzFQ,SAyFCjB,EAAMV,GACd,IAAI4B,EAAO1E,KAAKwB,WAAW8B,MAAK,SAACC,GAAD,OAAOA,EAAEC,MAAQA,KAE7CkB,EACHA,EAAK9C,QAAUkB,EAEf9C,KAAKwB,WAAWmD,KAAK,CACpBnB,OACA5B,QAASkB,KAMZ8B,YAvGQ,SAuGIpB,GACX,IAAMJ,EAAIpD,KAAKwB,WAAWqD,WAAU,SAACtB,GAAD,OAAOA,EAAEC,MAAQA,KACrDxD,KAAKwB,WAAWsD,OAAO1B,EAAG,IAI3BrB,QA7GQ,YA6GoB,IAAD,OAAjBE,EAAiB,EAAjBA,OAAQxB,EAAS,EAATA,MACbiE,EAAO,KAENjE,IACJA,EAAQG,OAAOoC,KAAKhD,KAAKU,QAG1BD,EAAMmD,SAAQ,SAACmB,GACdL,EAAO,EAAKlD,WAAW8B,MAAK,SAACC,GAAD,OAAOA,EAAEC,MAAQuB,KAEzCL,GACHA,EAAK9C,QAAQ,CAAEK,SAAQ+C,MAAO,EAAKtE,MAAMqE,W","file":"cool/ui/components/form/form.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./form.vue?vue&type=template&id=7ef8d365&\"\nvar renderjs\nimport script from \"./form.vue?vue&type=script&lang=js&\"\nexport * from \"./form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"program/mobilewhcmfont/cool/ui/components/form/form.vue\"\nexport default component.exports","export * from \"-!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./form.vue?vue&type=template&id=7ef8d365&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../前端工具/HBuilderX.2.6.16.20200424.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./form.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport AsyncValidator from \"../../utils/async-validator\";\r\nimport {\r\n\tisArray,\r\n\tisObject,\r\n\tisString,\r\n\tisBoolean,\r\n\tisEmpty,\r\n\tdiffForm,\r\n} from \"../../utils\";\r\n\r\nexport default {\r\n\tcomponentName: \"ClForm\",\r\n\r\n\tprops: {\r\n\t\tmodel: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn {};\r\n\t\t\t},\r\n\t\t},\r\n\t\trules: Object,\r\n\t\tborder: Boolean,\r\n\t\tshowMessage: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\tshowToast: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\tlabelWidth: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"150rpx\",\r\n\t\t},\r\n\t\tlabelPosition: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"right\",\r\n\t\t},\r\n\t\tvalidateOnValueChange: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tsubscrible: [],\r\n\t\t\trules2: [],\r\n\t\t};\r\n\t},\r\n\r\n\twatch: {\r\n\t\tmodel2: {\r\n\t\t\thandler(newV, oldV) {\r\n\t\t\t\tthis.publish({\r\n\t\t\t\t\tprops: diffForm(newV, oldV),\r\n\t\t\t\t\taction: \"validate\",\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdeep: true,\r\n\t\t},\r\n\r\n\t\trules(val) {\r\n\t\t\tthis.setRules(val);\r\n\t\t},\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tmodel2() {\r\n\t\t\treturn JSON.parse(JSON.stringify(this.model));\r\n\t\t},\r\n\r\n\t\tisLabelPosition() {\r\n\t\t\treturn this.labelPosition ? `cl-form--${this.labelPosition}` : \"\";\r\n\t\t},\r\n\r\n\t\tisBorder() {\r\n\t\t\treturn this.border ? \"cl-form--border\" : \"\";\r\n\t\t},\r\n\t},\r\n\r\n\tcreated() {\r\n\t\tthis.setRules(this.rules);\r\n\t},\r\n\r\n\tmethods: {\r\n\t\t// 弥补 props 方法不能传递的问题\r\n\t\tsetRules(rules) {\r\n\t\t\tthis.rules2 = rules || {};\r\n\t\t},\r\n\r\n\t\t// 校验表单\r\n\t\tvalidate(callback) {\r\n\t\t\tthis.validateField(Object.keys(this.model), callback);\r\n\t\t},\r\n\r\n\t\t// 根据字段校验表单\r\n\t\tvalidateField(props, callback) {\r\n\t\t\tif (!props) {\r\n\t\t\t\tconsole.warn(`Props 为空`);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (!isArray(props)) {\r\n\t\t\t\tprops = [props];\r\n\t\t\t}\r\n\r\n\t\t\tlet rules = {};\r\n\r\n\t\t\tfor (let i in this.rules2) {\r\n\t\t\t\tif (props.includes(i)) {\r\n\t\t\t\t\tif (this.subscrible.find((e) => e.prop == i)) {\r\n\t\t\t\t\t\trules[i] = this.rules2[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst validator = new AsyncValidator(rules);\r\n\r\n\t\t\tlet form = {};\r\n\r\n\t\t\tprops.forEach((e) => {\r\n\t\t\t\tform[e] = this.model[e];\r\n\t\t\t});\r\n\r\n\t\t\tvalidator.validate(form, (errors, fields) => {\r\n\t\t\t\tthis.publish({ props, action: \"validate\" });\r\n\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tcallback(!errors, errors);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 重置表单\r\n\t\tresetFields() {\r\n\t\t\tlet form = {};\r\n\t\t\tlet flag = false;\r\n\r\n\t\t\tfor (let i in this.model) {\r\n\t\t\t\tlet val = this.model[i];\r\n\r\n\t\t\t\tif (val) {\r\n\t\t\t\t\tflag = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (isArray(val)) {\r\n\t\t\t\t\tform[i] = val.map(() => null);\r\n\t\t\t\t} else if (isObject(val)) {\r\n\t\t\t\t\tform[i] = {};\r\n\t\t\t\t} else if (isString(val)) {\r\n\t\t\t\t\tform[i] = \"\";\r\n\t\t\t\t} else if (isBoolean(val)) {\r\n\t\t\t\t\tform[i] = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tform[i] = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (flag) {\r\n\t\t\t\tthis.$emit(\"update:model\", form);\r\n\t\t\t}\r\n\r\n\t\t\tthis.clearValidate();\r\n\t\t},\r\n\r\n\t\t// 移除表单校验结果\r\n\t\tclearValidate(props) {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.publish({ props, action: \"clear\" });\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 添加字段，监听事件\r\n\t\taddField(prop, callback) {\r\n\t\t\tlet item = this.subscrible.find((e) => e.prop == prop);\r\n\r\n\t\t\tif (item) {\r\n\t\t\t\titem.handler = callback;\r\n\t\t\t} else {\r\n\t\t\t\tthis.subscrible.push({\r\n\t\t\t\t\tprop,\r\n\t\t\t\t\thandler: callback,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// 移除字段和事件\r\n\t\tremoveField(prop) {\r\n\t\t\tconst i = this.subscrible.findIndex((e) => e.prop == prop);\r\n\t\t\tthis.subscrible.splice(i, 1);\r\n\t\t},\r\n\r\n\t\t// 发布消息\r\n\t\tpublish({ action, props }) {\r\n\t\t\tlet item = null;\r\n\r\n\t\t\tif (!props) {\r\n\t\t\t\tprops = Object.keys(this.model);\r\n\t\t\t}\r\n\r\n\t\t\tprops.forEach((k) => {\r\n\t\t\t\titem = this.subscrible.find((e) => e.prop == k);\r\n\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\titem.handler({ action, value: this.model[k] });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n"],"sourceRoot":""}