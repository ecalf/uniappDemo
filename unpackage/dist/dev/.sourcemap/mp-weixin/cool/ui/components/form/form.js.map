{"version":3,"sources":["webpack:///C:/Users/windows/Desktop/mobilewhcmfont/cool/ui/components/form/form.vue?bcb2","webpack:///C:/Users/windows/Desktop/mobilewhcmfont/cool/ui/components/form/form.vue?3aff","webpack:///C:/Users/windows/Desktop/mobilewhcmfont/cool/ui/components/form/form.vue?2dc6","webpack:///C:/Users/windows/Desktop/mobilewhcmfont/cool/ui/components/form/form.vue?236d","uni-app:///cool/ui/components/form/form.vue"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;;;AAGnD;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA8lB,CAAgB,wnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACOlnB;AACA,yD;;;;;;;;;AASA;AACA,yBADA;;AAGA;AACA;AACA,kBADA;AAEA;AACA;AACA,OAJA,EADA;;AAOA,iBAPA;AAQA,mBARA;AASA;AACA,mBADA;AAEA,mBAFA,EATA;;AAaA;AACA,mBADA;AAEA,oBAFA,EAbA;;AAiBA;AACA,kBADA;AAEA,uBAFA,EAjBA;;AAqBA;AACA,kBADA;AAEA,sBAFA,EArBA;;AAyBA;AACA,mBADA;AAEA,mBAFA,EAzBA,EAHA;;;;AAkCA,MAlCA,kBAkCA;AACA;AACA,oBADA;AAEA,gBAFA;;AAIA,GAvCA;;AAyCA;AACA;AACA,aADA,mBACA,IADA,EACA,IADA,EACA;AACA;AACA,iDADA;AAEA,4BAFA;;AAIA,OANA;AAOA,gBAPA,EADA;;;AAWA,SAXA,iBAWA,GAXA,EAWA;AACA;AACA,KAbA,EAzCA;;;AAyDA;AACA,UADA,oBACA;AACA;AACA,KAHA;;AAKA,mBALA,6BAKA;AACA;AACA,KAPA;;AASA,YATA,sBASA;AACA;AACA,KAXA,EAzDA;;;AAuEA,SAvEA,qBAuEA;AACA;AACA,GAzEA;;AA2EA;AACA;AACA,YAFA,oBAEA,KAFA,EAEA;AACA;AACA,KAJA;;AAMA;AACA,YAPA,oBAOA,QAPA,EAOA;AACA;AACA,KATA;;AAWA;AACA,iBAZA,yBAYA,KAZA,EAYA,QAZA,EAYA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAVA;;AAYA,OAZA;AAaA;AACA;AACA;AACA;AACA,SAjBA,EAYA;AAMA;;AAEA;;AAEA;;AAEA;AACA;AACA,OAFA;;AAIA;AACA;;AAEA;AACA;AACA;AACA,OANA;AAOA,KA/CA;;AAiDA;AACA,eAlDA,yBAkDA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KA/EA;;AAiFA;AACA,iBAlFA,yBAkFA,KAlFA,EAkFA;AACA;AACA;AACA,OAFA;AAGA,KAtFA;;AAwFA;AACA,YAzFA,oBAyFA,IAzFA,EAyFA,QAzFA,EAyFA;AACA;;AAEA;AACA;AACA,OAFA,MAEA;AACA;AACA,oBADA;AAEA,2BAFA;;AAIA;AACA,KApGA;;AAsGA;AACA,eAvGA,uBAuGA,IAvGA,EAuGA;AACA;AACA;AACA,KA1GA;;AA4GA;AACA,WA7GA,yBA6GA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OANA;AAOA,KA3HA,EA3EA,E","file":"cool/ui/components/form/form.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./form.vue?vue&type=template&id=e137d7c4&\"\nvar renderjs\nimport script from \"./form.vue?vue&type=script&lang=js&\"\nexport * from \"./form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"C:/Users/windows/Desktop/mobilewhcmfont/cool/ui/components/form/form.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./form.vue?vue&type=template&id=e137d7c4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./form.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view :class=\"['cl-form', isLabelPosition, isBorder]\">\r\n\t\t<slot></slot>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport AsyncValidator from \"../../utils/async-validator\";\r\nimport {\r\n\tisArray,\r\n\tisObject,\r\n\tisString,\r\n\tisBoolean,\r\n\tisEmpty,\r\n\tdiffForm,\r\n} from \"../../utils\";\r\n\r\nexport default {\r\n\tcomponentName: \"ClForm\",\r\n\r\n\tprops: {\r\n\t\tmodel: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn {};\r\n\t\t\t},\r\n\t\t},\r\n\t\trules: Object,\r\n\t\tborder: Boolean,\r\n\t\tshowMessage: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\tshowToast: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false,\r\n\t\t},\r\n\t\tlabelWidth: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"150rpx\",\r\n\t\t},\r\n\t\tlabelPosition: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"right\",\r\n\t\t},\r\n\t\tvalidateOnValueChange: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t},\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tsubscrible: [],\r\n\t\t\trules2: [],\r\n\t\t};\r\n\t},\r\n\r\n\twatch: {\r\n\t\tmodel2: {\r\n\t\t\thandler(newV, oldV) {\r\n\t\t\t\tthis.publish({\r\n\t\t\t\t\tprops: diffForm(newV, oldV),\r\n\t\t\t\t\taction: \"validate\",\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdeep: true,\r\n\t\t},\r\n\r\n\t\trules(val) {\r\n\t\t\tthis.setRules(val);\r\n\t\t},\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tmodel2() {\r\n\t\t\treturn JSON.parse(JSON.stringify(this.model));\r\n\t\t},\r\n\r\n\t\tisLabelPosition() {\r\n\t\t\treturn this.labelPosition ? `cl-form--${this.labelPosition}` : \"\";\r\n\t\t},\r\n\r\n\t\tisBorder() {\r\n\t\t\treturn this.border ? \"cl-form--border\" : \"\";\r\n\t\t},\r\n\t},\r\n\r\n\tcreated() {\r\n\t\tthis.setRules(this.rules);\r\n\t},\r\n\r\n\tmethods: {\r\n\t\t// 弥补 props 方法不能传递的问题\r\n\t\tsetRules(rules) {\r\n\t\t\tthis.rules2 = rules || {};\r\n\t\t},\r\n\r\n\t\t// 校验表单\r\n\t\tvalidate(callback) {\r\n\t\t\tthis.validateField(Object.keys(this.model), callback);\r\n\t\t},\r\n\r\n\t\t// 根据字段校验表单\r\n\t\tvalidateField(props, callback) {\r\n\t\t\tif (!props) {\r\n\t\t\t\tconsole.warn(`Props 为空`);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (!isArray(props)) {\r\n\t\t\t\tprops = [props];\r\n\t\t\t}\r\n\r\n\t\t\tlet rules = {};\r\n\r\n\t\t\tfor (let i in this.rules2) {\r\n\t\t\t\tif (props.includes(i)) {\r\n\t\t\t\t\tif (this.subscrible.find((e) => e.prop == i)) {\r\n\t\t\t\t\t\trules[i] = this.rules2[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst validator = new AsyncValidator(rules);\r\n\r\n\t\t\tlet form = {};\r\n\r\n\t\t\tprops.forEach((e) => {\r\n\t\t\t\tform[e] = this.model[e];\r\n\t\t\t});\r\n\r\n\t\t\tvalidator.validate(form, (errors, fields) => {\r\n\t\t\t\tthis.publish({ props, action: \"validate\" });\r\n\r\n\t\t\t\tif (callback) {\r\n\t\t\t\t\tcallback(!errors, errors);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 重置表单\r\n\t\tresetFields() {\r\n\t\t\tlet form = {};\r\n\t\t\tlet flag = false;\r\n\r\n\t\t\tfor (let i in this.model) {\r\n\t\t\t\tlet val = this.model[i];\r\n\r\n\t\t\t\tif (val) {\r\n\t\t\t\t\tflag = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (isArray(val)) {\r\n\t\t\t\t\tform[i] = val.map(() => null);\r\n\t\t\t\t} else if (isObject(val)) {\r\n\t\t\t\t\tform[i] = {};\r\n\t\t\t\t} else if (isString(val)) {\r\n\t\t\t\t\tform[i] = \"\";\r\n\t\t\t\t} else if (isBoolean(val)) {\r\n\t\t\t\t\tform[i] = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tform[i] = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (flag) {\r\n\t\t\t\tthis.$emit(\"update:model\", form);\r\n\t\t\t}\r\n\r\n\t\t\tthis.clearValidate();\r\n\t\t},\r\n\r\n\t\t// 移除表单校验结果\r\n\t\tclearValidate(props) {\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.publish({ props, action: \"clear\" });\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 添加字段，监听事件\r\n\t\taddField(prop, callback) {\r\n\t\t\tlet item = this.subscrible.find((e) => e.prop == prop);\r\n\r\n\t\t\tif (item) {\r\n\t\t\t\titem.handler = callback;\r\n\t\t\t} else {\r\n\t\t\t\tthis.subscrible.push({\r\n\t\t\t\t\tprop,\r\n\t\t\t\t\thandler: callback,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// 移除字段和事件\r\n\t\tremoveField(prop) {\r\n\t\t\tconst i = this.subscrible.findIndex((e) => e.prop == prop);\r\n\t\t\tthis.subscrible.splice(i, 1);\r\n\t\t},\r\n\r\n\t\t// 发布消息\r\n\t\tpublish({ action, props }) {\r\n\t\t\tlet item = null;\r\n\r\n\t\t\tif (!props) {\r\n\t\t\t\tprops = Object.keys(this.model);\r\n\t\t\t}\r\n\r\n\t\t\tprops.forEach((k) => {\r\n\t\t\t\titem = this.subscrible.find((e) => e.prop == k);\r\n\r\n\t\t\t\tif (item) {\r\n\t\t\t\t\titem.handler({ action, value: this.model[k] });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n"],"sourceRoot":""}