{"version":3,"sources":["webpack:///C:/Users/windows/Desktop/mobilewhcmfont/components/u-upload/u-upload.vue?1f76","webpack:///C:/Users/windows/Desktop/mobilewhcmfont/components/u-upload/u-upload.vue?065f","webpack:///C:/Users/windows/Desktop/mobilewhcmfont/components/u-upload/u-upload.vue?de5c","webpack:///C:/Users/windows/Desktop/mobilewhcmfont/components/u-upload/u-upload.vue?1478","uni-app:///components/u-upload/u-upload.vue","webpack:///C:/Users/windows/Desktop/mobilewhcmfont/components/u-upload/u-upload.vue?afb6","webpack:///C:/Users/windows/Desktop/mobilewhcmfont/components/u-upload/u-upload.vue?f908"],"names":[],"mappings":"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A;AAGA,0BAHA;;AAKA;AACA;AACA;AACA,SArBA;AAsBA;AACA;AACA;AACA,OAlCA;AAmCA,WAnCA,CAmCA;AACA;AACA,OArCA;AAsCA,KAnEA;AAoEA;AACA,aArEA,qBAqEA,OArEA,EAqEA;AACA;AACA;AACA,wBADA;AAEA,sBAFA;;AAIA;AACA,KA5EA;AA6EA;AACA,UA9EA,oBA8EA;AACA;AACA,KAhFA;AAiFA;AACA,SAlFA,iBAkFA,KAlFA,EAkFA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBADA;;AAGA;AACA,KA5FA;AA6FA;AACA,cA9FA,wBA8FA;AACA;;;;;;;;;;;;;;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA,wBADA;AAEA,uCAFA;AAGA,uBAHA;AAIA,+BAJA;AAKA,2BALA;AAMA;AACA;AACA;;AAEA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SApBA;AAqBA;AACA;AACA,SAvBA;AAwBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAhCA;;AAkCA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,OATA;AAUA,KAjLA;AAkLA;AACA,eAnLA,uBAmLA,KAnLA,EAmLA,GAnLA,EAmLA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,KA7LA;AA8LA;AACA,cA/LA,sBA+LA,KA/LA,EA+LA;AACA;AACA,mBADA;AAEA,6BAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAfA;;AAiBA,KAjNA;AAkNA;AACA,UAnNA,kBAmNA,KAnNA,EAmNA;AACA;AACA;AACA;AACA;AACA;AACA,KAzNA;AA0NA;AACA,kBA3NA,0BA2NA,GA3NA,EA2NA,KA3NA,EA2NA;AACA;AACA;AACA;AACA;AACA,oBADA;AAEA,oBAFA;AAGA;AACA;AACA,SALA;AAMA;AACA;AACA,2BADA;AAEA,wBAFA;;AAIA,SAXA;;AAaA,KA5OA,EA7IA,E;;;;;;;;;;;;;ACnEA;AAAA;AAAA;AAAA;AAA4nC,CAAgB,smCAAG,EAAC,C;;;;;;;;;;;ACAhpC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/u-upload/u-upload.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./u-upload.vue?vue&type=template&id=10a201e9&scoped=true&\"\nvar renderjs\nimport script from \"./u-upload.vue?vue&type=script&lang=js&\"\nexport * from \"./u-upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./u-upload.vue?vue&type=style&index=0&id=10a201e9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"10a201e9\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"C:/Users/windows/Desktop/mobilewhcmfont/components/u-upload/u-upload.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./u-upload.vue?vue&type=template&id=10a201e9&scoped=true&\"","var components = {\n  clIcon: function() {\n    return import(\n      /* webpackChunkName: \"cool/ui/components/icon/icon\" */ \"@/cool/ui/components/icon/icon.vue\"\n    )\n  },\n  uLineProgress: function() {\n    return import(\n      /* webpackChunkName: \"components/u-line-progress/u-line-progress\" */ \"@/components/u-line-progress/u-line-progress.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./u-upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./u-upload.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"u-upload\" v-if=\"!disabled\">\r\n\t\t<view v-if=\"showUploadList\" class=\"u-list-item u-preview-wrap\" v-for=\"(item, index) in lists\" :key=\"index\" :style=\"{\r\n\t\t\twidth: width + 'rpx',\r\n\t\t\theight: width + 'rpx'\r\n\t\t}\">\r\n\t\t\t<view v-if=\"deletable\" class=\"u-delete-icon\" @tap.stop=\"deleteItem(index)\">\r\n\t\t\t\t<!-- <u-icon class=\"u-icon\" name=\"close\" size=\"20\" color=\"#ffffff\"></u-icon> -->\r\n\t\t\t\t<cl-icon name=\"cl-icon-close\" color=\"#ffffff\"></cl-icon>\r\n\t\t\t</view>\r\n\t\t\t<u-line-progress v-if=\"showProgress && item.progress > 0 && !item.error\" :show-percent=\"false\" height=\"16\" class=\"u-progress\" :percent=\"item.progress\"></u-line-progress>\r\n\t\t\t<view @tap.stop=\"retry(index)\" v-if=\"item.error\" class=\"u-error-btn\">点击重试</view>\r\n\t\t\t<image @tap.stop=\"doPreviewImage(item.url || item.path, index)\" class=\"u-preview-image\" v-if=\"!item.isImage\" :src=\" item.url || item.path \"\r\n\t\t\t :mode=\"imageMode\"></image>\r\n\t\t\t \r\n\t\t</view>\r\n\t\t<slot name=\"file\" :file=\"lists\"></slot>\r\n\t\t<view style=\"display: inline-block;\" @tap=\"selectFile\" v-if=\"maxCount > lists.length\">\r\n\t\t\t<slot name=\"addBtn\"></slot>\r\n\t\t\t<view v-if=\"!customBtn\" class=\"u-list-item u-add-wrap\" hover-class=\"u-add-wrap__hover\" hover-stay-time=\"150\" :style=\"{\r\n\t\t\t\twidth: width + 'rpx',\r\n\t\t\t\theight: width + 'rpx'\r\n\t\t\t}\">\r\n\t\t\t\t<view class=\"iconfont add-icon u-icon\">&#xe61e;</view>\r\n\t\t\t<!-- \t<view class=\"u-add-tips\">{{uploadText}}</view> -->\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t/**\r\n\t * upload 图片上传\r\n\t * @description 该组件用于上传图片场景\r\n\t * @tutorial https://www.uviewui.com/components/upload.html\r\n\t * @property {String} action 服务器上传地址\r\n\t * @property {String Number} max-count 最大选择图片的数量（默认99）\r\n\t * @property {Boolean} custom-btn 如果需要自定义选择图片的按钮，设置为true（默认false）\r\n\t * @property {Boolean} show-progress 是否显示进度条（默认true）\r\n\t * @property {Boolean} disabled 是否启用(显示/移仓)组件（默认false）\r\n\t * @property {String} image-mode 预览图片等显示模式，可选值为uni的image的mode属性值（默认aspectFill）\r\n\t * @property {Object} header 上传携带的头信息，对象形式\r\n\t * @property {Object} form-data 上传额外携带的参数\r\n\t * @property {String} name 上传文件的字段名，供后端获取使用（默认file）\r\n\t * @property {Array<String>} size-type original 原图，compressed 压缩图，默认二者都有（默认['original', 'compressed']）\r\n\t * @property {Array<String>} source-type 选择图片的来源，album-从相册选图，camera-使用相机，默认二者都有（默认['album', 'camera']）\r\n\t * @property {Boolean} preview-full-image\t是否可以通过uni.previewImage预览已选择的图片（默认true）\r\n\t * @property {Boolean} multiple\t是否开启图片多选，部分安卓机型不支持（默认true）\r\n\t * @property {Boolean} deletable 是否显示删除图片的按钮（默认true）\r\n\t * @property {String Number} max-size 选择单个文件的最大大小，单位B(byte)，默认不限制（默认Number.MAX_VALUE）\r\n\t * @property {Array<Object>} file-list 默认显示的图片列表，数组元素为对象，必须提供url属性\r\n\t * @property {Boolean} upload-text 选择图片按钮的提示文字（默认“选择图片”）\r\n\t * @property {Boolean} auto-upload 选择完图片是否自动上传，见上方说明（默认true）\r\n\t * @property {Boolean} show-tips 特殊情况下是否自动提示toast，见上方说明（默认true）\r\n\t * @property {Boolean} show-upload-list 是否显示组件内部的图片预览（默认true）\r\n\t * @event {Function} on-oversize 图片大小超出最大允许大小\r\n\t * @event {Function} on-preview 全屏预览图片时触发\r\n\t * @event {Function} on-remove 移除图片时触发\r\n\t * @event {Function} on-success 图片上传成功时触发\r\n\t * @event {Function} on-change 图片上传后，无论成功或者失败都会触发\r\n\t * @event {Function} on-error 图片上传失败时触发\r\n\t * @event {Function} on-progress 图片上传过程中的进度变化过程触发\r\n\t * @event {Function} on-uploaded 所有图片上传完毕触发\r\n\t * @event {Function} on-choose-complete 每次选择图片后触发，只是让外部可以得知每次选择后，内部的文件列表\r\n\t * @example <u-upload :action=\"action\" :file-list=\"fileList\" ></u-upload>\r\n\t */\r\n\timport uLineProgress from '@/components/u-line-progress/u-line-progress'\r\n\texport default {\r\n\t\tname: 'u-upload',\r\n\t\tcomponents:{\r\n\t\t\tuLineProgress\r\n\t\t},\r\n\t\tprops: {\r\n\t\t\t//是否显示组件自带的图片预览功能\r\n\t\t\tshowUploadList: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t// 后端地址\r\n\t\t\taction: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\t// 最大上传数量\r\n\t\t\tmaxCount: {\r\n\t\t\t\ttype: [String, Number],\r\n\t\t\t\tdefault: 52\r\n\t\t\t},\r\n\t\t\t//  是否显示进度条\r\n\t\t\tshowProgress: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t// 是否启用\r\n\t\t\tdisabled: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\t// 预览上传的图片时的裁剪模式，和image组件mode属性一致\r\n\t\t\timageMode: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'aspectFill'\r\n\t\t\t},\r\n\t\t\t// 头部信息\r\n\t\t\theader: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault () {\r\n\t\t\t\t\treturn {}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 额外携带的参数\r\n\t\t\tformData: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault () {\r\n\t\t\t\t\treturn {}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 上传的文件字段名\r\n\t\t\tname: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'file'\r\n\t\t\t},\r\n\t\t\t// 所选的图片的尺寸, 可选值为original compressed\r\n\t\t\tsizeType: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault () {\r\n\t\t\t\t\treturn ['original', 'compressed']\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsourceType: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault () {\r\n\t\t\t\t\treturn ['album', 'camera']\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 是否在点击预览图后展示全屏图片预览\r\n\t\t\tpreviewFullImage: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t// 是否开启图片多选，部分安卓机型不支持\r\n\t\t\tmultiple: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t// 是否展示删除按钮\r\n\t\t\tdeletable: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t// 文件大小限制，单位为byte\r\n\t\t\tmaxSize: {\r\n\t\t\t\ttype: [String, Number],\r\n\t\t\t\tdefault: Number.MAX_VALUE\r\n\t\t\t},\r\n\t\t\t// 显示已上传的文件列表，保存在父组件，传入该组件以便组件更新后可以显示这些文件\r\n\t\t\tfileList: {\r\n\t\t\t\ttype: Array,\r\n\t\t\t\tdefault () {\r\n\t\t\t\t\treturn []\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 上传区域的提示文字\r\n\t\t\tuploadText: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '选择图片'\r\n\t\t\t},\r\n\t\t\t// 是否自动上传\r\n\t\t\tautoUpload: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t// 是否显示toast消息提示\r\n\t\t\tshowTips: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\t// 是否通过slot自定义传入选择图标的按钮\r\n\t\t\tcustomBtn: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\t// 内部预览图片区域和选择图片按钮的区域宽度，高等于宽\r\n\t\t\twidth: {\r\n\t\t\t\ttype: [String, Number],\r\n\t\t\t\tdefault: 200\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tlists: [],\r\n\t\t\t\tisInCount: true,\r\n\t\t\t\tuploading: false\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tfileList: {\r\n\t\t\t\timmediate: true,\r\n\t\t\t\thandler(val) {\r\n\t\t\t\t\tval.map(value => {\r\n\t\t\t\t\t\tthis.lists.push({url: value.url, error: false, progress: 100});\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 清除列表\r\n\t\t\tclear() {\r\n\t\t\t\tthis.lists = [];\r\n\t\t\t\t// 如果是清空形式的话，发出\"on-list-change\"事件\r\n\t\t\t\tthis.$emit('on-list-change', this.lists);\r\n\t\t\t},\r\n\t\t\t// 重新上传队列中上传失败的所有文件\r\n\t\t\treUpload() {\r\n\t\t\t\tthis.uploadFile();\r\n\t\t\t},\r\n\t\t\t// 选择图片\r\n\t\t\tselectFile() {\r\n\t\t\t\tif (this.disabled) return;\r\n\t\t\t\tconst {\r\n\t\t\t\t\tname = '', maxCount, multiple, maxSize, sizeType, lists, camera, compressed, maxDuration, sourceType\r\n\t\t\t\t} = this;\r\n\t\t\t\tlet chooseFile = null;\r\n\t\t\t\tconst newMaxCount = maxCount - lists.length;\r\n\t\t\t\t// 设置为只选择图片的时候使用 chooseImage 来实现\r\n\t\t\t\tchooseFile = new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\t\tcount: multiple ? (newMaxCount > 9 ? 9 : newMaxCount) : 1,\r\n\t\t\t\t\t\tsourceType: sourceType,\r\n\t\t\t\t\t\tsizeType,\r\n\t\t\t\t\t\tsuccess: resolve,\r\n\t\t\t\t\t\tfail: reject\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tchooseFile\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t//console.log('=============chooseFile=============');\r\n\t\t\t\t\t\t//console.log('res:', res);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet file = null;\r\n\t\t\t\t\t\t//传入的 file-list 是已经上传完毕的文件,新选择的文件index从listOldLength开始\r\n\t\t\t\t\t\tlet listOldLength = this.lists.length;\r\n\t\t\t\t\t\tres.tempFiles.map((val, index) => {\r\n\t\t\t\t\t\t\t// 如果是非多选，index大于等于1或者超出最大限制数量时，不处理\r\n\t\t\t\t\t\t\tif (!multiple && index >= 1) return;\r\n\t\t\t\t\t\t\tif (val.size > maxSize) {\r\n\t\t\t\t\t\t\t\tthis.$emit('on-oversize', val, this.lists);\r\n\t\t\t\t\t\t\t\tthis.showToast('超出允许的文件大小');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif(maxCount <= lists.length) {\r\n\t\t\t\t\t\t\t\t\tthis.$emit('on-exceed', val, this.lists);\r\n\t\t\t\t\t\t\t\t\tthis.showToast('超出最大允许的文件个数');\r\n\t\t\t\t\t\t\t\t\treturn ;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tlists.push({\r\n\t\t\t\t\t\t\t\t\turl: val.path,\r\n\t\t\t\t\t\t\t\t\tprogress: 0,\r\n\t\t\t\t\t\t\t\t\terror: false\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t// 列表发生改变，发出事件，第二个参数为当前发生变化的项的索引\r\n\t\t\t\t\t\t\t\tthis.$emit('on-list-change', this.lists);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// 每次图片选择完，抛出一个事件，并将当前内部选择的图片数组抛出去\r\n\t\t\t\t\t\tthis.$emit('on-choose-complete', this.lists);\r\n\t\t\t\t\t\tif(this.autoUpload) this.uploadFile(listOldLength);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\t// this.$emit('on-error', error);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 提示用户消息\r\n\t\t\tshowToast(message, force = false) {\r\n\t\t\t\tif(this.showTips || force) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: message,\r\n\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 该方法供用户通过ref调用，手动上传\r\n\t\t\tupload() {\r\n\t\t\t\tthis.uploadFile();\r\n\t\t\t},\r\n\t\t\t// 对失败的图片重新上传\r\n\t\t\tretry(index) {\r\n\t\t\t\t//console.log('========== retry uploadFile ==================');\r\n\t\t\t\t\r\n\t\t\t\tthis.lists[index].progress = 0;\r\n\t\t\t\tthis.lists[index].error = false;\r\n\t\t\t\tthis.lists[index].response = null;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t    title: '重新上传'\r\n\t\t\t\t});\r\n\t\t\t\tthis.uploadFile(index);\r\n\t\t\t},\r\n\t\t\t// 上传图片\r\n\t\t\tuploadFile(index = 0) {\r\n\t\t\t\t/* console.log('=========== u-upload component, uploadFile check params============');\r\n\t\t\t\tconsole.log('index:',index);\r\n\t\t\t\tconsole.log('disabled:',this.disabled);\r\n\t\t\t\tconsole.log('uploading:',this.uploading);\r\n\t\t\t\tconsole.log('lists:',this.lists);\r\n\t\t\t\tconsole.log('header:',this.header);\r\n\t\t\t\tconsole.log('action:',this.action);\r\n\t\t\t\tconsole.log('filePath:',this.lists[index]&&this.lists[index].url);\r\n\t\t\t\tconsole.log('name:',this.name);\r\n\t\t\t\tconsole.log('formData:',this.formData); */\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif (this.disabled) return;\r\n\t\t\t\tif(this.uploading) return ;\r\n\t\t\t\t// 全部上传完成\r\n\t\t\t\tif (index >= this.lists.length)  {\r\n\t\t\t\t\tthis.$emit('on-uploaded', this.lists);\r\n\t\t\t\t\treturn ;\r\n\t\t\t\t}\r\n\t\t\t\t// 检查上传地址\r\n\t\t\t\tif (!this.action) {\r\n\t\t\t\t\tthis.showToast('请配置上传地址', true);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 检查是否是已上传或者正在上传中\r\n\t\t\t\tif (this.lists[index].progress == 100) {\r\n\t\t\t\t\tif(this.autoUpload == false) this.uploadFile(index + 1);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.lists[index].error = false;\r\n\t\t\t\tthis.uploading = true;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t//console.log('==============u-upload component, uploadFile begin======================');\r\n\t\t\t\t\r\n\t\t\t\t// 创建上传对象\r\n\t\t\t\tconst task = uni.uploadFile({\r\n\t\t\t\t\turl: this.action,\r\n\t\t\t\t\tfilePath: this.lists[index].url,\r\n\t\t\t\t\tname: this.name,\r\n\t\t\t\t\tformData: this.formData,\r\n\t\t\t\t\theader: this.header,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t//console.log('=============uploadFile success============================');\r\n\t\t\t\t\t\t//console.log('res:',res);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (res.statusCode != 200) {\r\n\t\t\t\t\t\t\tthis.uploadError(index, res.data);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 上传成功\r\n\t\t\t\t\t\t\t//debugger\r\n\t\t\t\t\t\t\tthis.lists[index].response = res.data;\r\n\t\t\t\t\t\t\tthis.lists[index].progress = 100;\r\n\t\t\t\t\t\t\tthis.lists[index].error = false;\r\n\t\t\t\t\t\t\tthis.$emit('on-success', res.data, index, this.lists);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (e) => {\r\n\t\t\t\t\t\tthis.uploadError(index, e);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: (res) => {\r\n\t\t\t\t\t\t//console.log('=============uploadFile complete============================');\r\n\t\t\t\t\t\t//console.log('res:',res);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tthis.uploading = false;\r\n\t\t\t\t\t\tthis.uploadFile(index + 1);\r\n\t\t\t\t\t\tthis.$emit('on-change', res, index, this.lists);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\ttask.onProgressUpdate((res) => {\r\n\t\t\t\t\t//console.log('=============uploadFile onProgressUpdate============================');\r\n\t\t\t\t\t//console.log('res:',res);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (res.progress > 0) {\r\n\t\t\t\t\t\tthis.lists[index].progress = res.progress;\r\n\t\t\t\t\t\tthis.$emit('on-progress', res, index, this.lists);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 上传失败\r\n\t\t\tuploadError(index, err) {\r\n\t\t\t\t//console.log('=============uploadFile onProgressUpdate============================');\r\n\t\t\t\t//console.log('err:',err);\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tthis.lists[index].progress = 0;\r\n\t\t\t\tthis.lists[index].error = true;\r\n\t\t\t\tthis.lists[index].response = null;\r\n\t\t\t\tthis.$emit('on-error', err, index, this.lists);\r\n\t\t\t\tthis.showToast('上传失败，请重试');\r\n\t\t\t},\r\n\t\t\t// 删除一个图片\r\n\t\t\tdeleteItem(index) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '您确定要删除此项吗？',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tif (this.lists[index].process < 100 && this.lists[index].process > 0) {\r\n\t\t\t\t\t\t\t\ttypeof this.lists[index].uploadTask != 'undefined' && this.lists[index].uploadTask.abort();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.lists.splice(index, 1);\r\n\t\t\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t\t\t\tthis.$emit('on-remove', index, this.lists);\r\n\t\t\t\t\t\t\tthis.showToast('移除成功');\r\n\t\t\t\t\t\t\t// 列表发生改变，发出事件\r\n\t\t\t\t\t\t\tthis.$emit('on-list-change', this.lists);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 用户通过ref手动的形式，移除一张图片\r\n\t\t\tremove(index) {\r\n\t\t\t\t// 判断索引的合法范围\r\n\t\t\t\tif(index >= 0 && index < this.lists.length) {\r\n\t\t\t\t\tthis.lists.splice(index, 1);\r\n\t\t\t\t\tthis.$emit('on-list-change', this.lists);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 预览图片\r\n\t\t\tdoPreviewImage(url, index) {\r\n\t\t\t\tif (!this.previewFullImage)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tconst images = this.lists.map(item => item.url || item.path);\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: images,\r\n\t\t\t\t\tcurrent: url,\r\n\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\tthis.$emit('on-preview', url, this.lists);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '预览图片失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t$u-type-error:#f23a3b;\r\n\t$u-content-color:#E2E2E2;\r\n\t\r\n\t.u-upload {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\talign-items: center;\r\n\t\t\r\n\t}\r\n\r\n\t.u-list-item {\r\n\t\twidth:181.15rpx;\r\n\t\theight:181.15rpx;\r\n\t\toverflow: hidden;\r\n\t\tmargin:0 18.11rpx 18.11rpx 0;\r\n\t\tposition: relative;\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tborder-radius:19.92rpx;\r\n\t\t\tborder: solid 1px #e2e2e2;\r\n\t}\r\n\r\n\t.u-preview-wrap {\r\n\t\tborder: 1px solid rgb(235, 236, 238);\r\n\t}\r\n\r\n\t.u-add-wrap {\r\n\t\tflex-direction: column;\r\n\t\tcolor: $u-content-color;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\t.u-add-tips {\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\r\n\t.u-add-wrap__hover {\r\n\t\t//background-color: rgb(235, 236, 238);\r\n\t}\r\n\r\n\t.u-preview-image {\r\n\t\tdisplay: block;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.u-delete-icon {\r\n\t\tposition: absolute;\r\n\t\ttop: 10rpx;\r\n\t\tright: 10rpx;\r\n\t\tz-index: 10;\r\n\t\tbackground-color: $u-type-error;\r\n\t\tborder-radius: 100rpx;\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.u-icon {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t.add-icon{\r\n\t\tfont-size:72.46rpx;\r\n\t}\r\n\t.u-progress {\r\n\t\tposition: absolute;\r\n\t\tbottom: 10rpx;\r\n\t\tleft: 8rpx;\r\n\t\tright: 8rpx;\r\n\t\tz-index: 9;\r\n\t\twidth: auto;\r\n\t}\r\n\t\r\n\t.u-error-btn {\r\n\t\tcolor: #FFFFFF;\r\n\t\tackground-color: $u-type-error;\r\n\t\tfont-size: 20rpx;\r\n\t\tpadding: 4px 0;\r\n\t\ttext-align: center;\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tz-index: 9;\r\n\t\tline-height: 1;\r\n\t}\r\n</style>\r\n","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./u-upload.vue?vue&type=style&index=0&id=10a201e9&lang=scss&scoped=true&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./u-upload.vue?vue&type=style&index=0&id=10a201e9&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1590649178168\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}